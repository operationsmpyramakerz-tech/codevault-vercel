<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>New Report / Request</title>
  <link rel="stylesheet" href="/css/style.css"/>
  <script src="https://unpkg.com/feather-icons"></script>

  <!-- Page-scoped styles (non-invasive) -->
  <style>
    :root{
      --pill-bg:#f6f7fb; --pill-text:#1f2937; --pill-active:#111827; --pill-active-text:#fff;
      --card-bg:#fff; --card-border:#eef1f6; --shadow:0 10px 30px rgba(17,24,39,.08);
      --muted:#6b7280;
    }
    .nrr-wrap{ max-width:1040px; margin:24px; padding:0 20px; }
    .nrr-header{ margin:6px 0 18px; }
    .nrr-title{ font-size:24px; font-weight:800; color:#0f172a; margin:0; }
    .nrr-muted{ color:var(--muted); }

    .nrr-tabs{ display:flex; justify-content:center; gap:14px; margin: 18px auto 20px; flex-wrap:wrap; }
    .nrr-tab{
      display:inline-flex; align-items:center; justify-content:center; text-decoration:none;
      min-width: 280px; padding:14px 22px; border-radius: 999px;
      background: var(--pill-bg); color: var(--pill-text); font-weight:700;
      box-shadow: 0 6px 18px rgba(17,24,39,.06);
      border: 1px solid var(--card-border);
      transition: transform .08s ease, box-shadow .12s ease, background .12s ease;
    }
    .nrr-tab:hover{ transform: translateY(-1px); box-shadow: 0 10px 26px rgba(17,24,39,.08); }
    .nrr-tab.active{ background: var(--pill-active); color: var(--pill-active-text); }

    .nrr-card{
      background: var(--card-bg); border:1px solid var(--card-border);
      border-radius: 18px; box-shadow: var(--shadow);
      padding: 20px; max-width: 900px; margin: 10px auto;
    }
    .nrr-panel[hidden]{ display:none !important; }
    .nrr-center{ display:flex; justify-content:center; }
  </style>
</head>
<body>
<script>
  // Keep sidebar collapsed state consistent with other pages
  (function(){try{if(window.innerWidth>768&&localStorage.getItem('ui.sidebarMini')==='1'){document.body.classList.add('sidebar-mini');}}catch(e){}})();
</script>

<div class="app-container">
  <!-- ======= SIDEBAR (copied layout, with active link) ======= -->
  <aside class="sidebar">
    <div class="sidebar-header">
      <h2>Dashboard</h2>
      <button id="sidebar-toggle" class="sidebar-toggle" aria-label="Toggle sidebar" aria-expanded="true">
        <i data-feather="chevrons-left"></i>
      </button>
    </div>

    <nav class="sidebar-nav">
      <ul class="nav-list">
        <li><a class="nav-link" href="/orders"><i data-feather="list"></i><span class="nav-label">Current Orders</span></a></li>
        <li><a class="nav-link" href="/orders/requested"><i data-feather="users"></i><span class="nav-label">Schools Requested Orders</span></a></li>
        <li><a class="nav-link" href="/orders/assigned"><i data-feather="user-check"></i><span class="nav-label">Storage</span></a></li>
        <li><a class="nav-link" href="/orders/new"><i data-feather="plus-circle"></i><span class="nav-label">Create New Order</span></a></li>
        <li><a class="nav-link" href="/stocktaking"><i data-feather="archive"></i><span class="nav-label">Stocktaking</span></a></li>
        <li><a class="nav-link" href="/logistics"><i data-feather="truck"></i><span class="nav-label">Logistics</span></a></li>
        <li><a class="nav-link" href="/funds"><i data-feather="dollar-sign"></i><span class="nav-label">Funds</span></a></li>
        <li><a class="nav-link active" href="/new-report-request.html"><i data-feather="folder-plus"></i><span class="nav-label">New Report / Request</span></a></li>
        <li><a class="nav-link" href="/orders/sv-orders"><i data-feather="award"></i><span class="nav-label">S.V schools orders</span></a></li>
      </ul>
    </nav>

    <div class="sidebar-footer">
      <button id="logoutBtn" class="logout-btn"><i data-feather="log-out"></i> Logout</button>
    </div>
  </aside>

  <!-- ======= MAIN CONTENT ======= -->
  <div class="main-content">
    <header class="main-header">
      <div class="header-row1">
        <div class="left">
          <div class="greeting-pill" aria-live="polite">
            <span class="greeting-avatar"><img src="/images/greeting-icon.png" alt="Hi icon"/></span>
            <div class="greet-text">
              <div class="greet-title">Hi, <span data-username="">...</span> 👋</div>
              <div class="greet-sub">Choose what you want to do</div>
            </div>
          </div>
        </div>
        <div class="right topbar-right">
          <a href="/account" class="account-mini" aria-label="My account" title="My account">
            <span class="ico-circle"><img src="/images/logo.png" alt="Logo"/></span>
            <span class="label">My account</span>
          </a>
        </div>
      </div>
      <div class="header-row2">
        <h1 class="page-title">New Report / Request</h1>
      </div>
    </header>
   <main class="nrr-layout container-full-width nrr-wrap">
  <!-- Local (page) sidebar -->
  <aside class="subsidebar" role="navigation" aria-label="New Report / Request sections">
    <ul class="subnav">
      <li>
        <button class="subnav-link is-active" data-tab="request">
          <i data-feather="plus-circle" aria-hidden="true"></i>
          <span>Request Additional Components</span>
        </button>
      </li>
      <li>
        <button class="subnav-link" data-tab="report">
          <i data-feather="tool" aria-hidden="true"></i>
          <span>Report Damage Components</span>
        </button>
      </li>
    </ul>
  </aside>

  <!-- Page content area -->
  <section class="subcontent">
    <!-- Keep the top horizontal tabs for mobile only -->
    <div class="nrr-tabs" role="tablist" aria-label="New Report / Request (mobile)">
      <button id="tab-request" class="nrr-tab is-active" role="tab"
              aria-selected="true" aria-controls="panel-request"
              data-tab="request">Request Additional Components</button>
      <button id="tab-report" class="nrr-tab" role="tab"
              aria-selected="false" aria-controls="panel-report"
              data-tab="report">Report Damage Components</button>
    </div>

    <!-- Panel: Request (your 3-step merged flow lives here) -->
    <section id="panel-request" class="nrr-panel is-active" role="tabpanel" aria-labelledby="tab-request">
      <!-- keep your existing stepper + steps here exactly as you have them -->
      <!-- request-stepper, #nrr-step1 / #nrr-step2 / #nrr-step3 … -->
    </section>

    <!-- Panel: Report -->
    <section id="panel-report" class="nrr-panel" role="tabpanel" aria-labelledby="tab-report">
      <!-- your “Report Damage Components” content / placeholder -->
      <div class="card" style="padding:16px; border-radius:12px;">
        <h3>Report Damage Components</h3>
        <p>This is a placeholder. Send me the content and I’ll wire it in.</p>
      </div>
    </section>
  </section>
</main>
  </div>
</div>

<script>feather.replace();</script>
<script src="/js/common-ui.js"></script>
<script src="/js/new-report-request.js" defer></script>
<script>
  // Ensure the sidebar link shows active when navigating via history API
  document.addEventListener('DOMContentLoaded', function () {
    var link = document.querySelector('.sidebar a[href="/new-report-request.html"]');
    if (link) { link.classList.add('active'); link.setAttribute('aria-current','page'); }
  });
</script>
</body>
</html>
